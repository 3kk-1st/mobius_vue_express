(function(t){function n(n){for(var i,c,r=n[0],a=n[1],l=n[2],d=0,p=[];d<r.length;d++)c=r[d],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&p.push(s[c][0]),s[c]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);u&&u(n);while(p.length)p.shift()();return o.push.apply(o,l||[]),e()}function e(){for(var t,n=0;n<o.length;n++){for(var e=o[n],i=!0,r=1;r<e.length;r++){var a=e[r];0!==s[a]&&(i=!1)}i&&(o.splice(n--,1),t=c(c.s=e[0]))}return t}var i={},s={app:0},o=[];function c(n){if(i[n])return i[n].exports;var e=i[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=t,c.c=i,c.d=function(t,n,e){c.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,n){if(1&n&&(t=c(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)c.d(e,i,function(n){return t[n]}.bind(null,i));return e},c.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(n,"a",n),n},c.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},c.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],a=r.push.bind(r);r.push=n,r=r.slice();for(var l=0;l<r.length;l++)n(r[l]);var u=a;o.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"047f":function(t,n,e){},1:function(t,n){},"172c":function(t,n,e){"use strict";e("047f")},2:function(t,n){},2742:function(t,n,e){},3:function(t,n){},4:function(t,n){},5:function(t,n){},"56c9":function(t,n,e){"use strict";e("2742")},"56d7":function(t,n,e){"use strict";e.r(n),e.d(n,"eventBus",(function(){return ft}));e("e260"),e("e6cf"),e("cca6"),e("a79d");var i=e("2b0e"),s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-app",[e("v-main",[e("router-view")],1)],1)},o=[],c={name:"App",components:{},data:function(){return{}}},r=c,a=e("2877"),l=e("6544"),u=e.n(l),d=e("7496"),p=e("f6c4"),f=Object(a["a"])(r,s,o,!1,null,null,null),v=f.exports;u()(f,{VApp:d["a"],VMain:p["a"]});var b=e("8c4f"),h=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",t._l(t.users,(function(n,i){return e("div",{key:i,staticClass:"user-wrap"},[e("h2",[t._v("No. "+t._s(i+1))]),e("dl",[e("dt",[t._v("아이디")]),e("dd",[t._v(t._s(n.userid))]),e("dt",[t._v("이름")]),e("dd",[t._v(t._s(n.name))])])])})),0)},m=[],g={data:function(){return{users:[]}},created:function(){var t=this;this.$http.get("/api/users").then((function(n){t.users=n.data}))}},x=g,_=Object(a["a"])(x,h,m,!1,null,null,null),w=_.exports,C=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"container"}},[e("Mqtt",{on:{new_mqtt_msg:t.addCin}}),e("div",{staticClass:"graph"},[e("d3-network",{attrs:{"net-nodes":t.nodes,"net-links":t.links,options:t.options}})],1)],1)},k=[],y=(e("159b"),e("b0c0"),e("8f40"),e("acef"),e("ac1f"),e("1276"),e("a15b"),e("fb6a"),e("2909"),e("b85c")),N=(e("c740"),e("a434"),e("d3b7"),e("25f0"),e("d81d"),e("99af"),function(t,n,e){var i=n.findIndex((function(n){return n.id===t}));i>-1?(n.splice(i,1),e(n)):e(null)}),$=function(t,n){var e,i=[],s=[],o=Object(y["a"])(n);try{for(o.s();!(e=o.n()).done;){var c=e.value;S(c.sid,t)&&S(c.tid,t)?i.push(c):s.push(c)}}catch(r){o.e(r)}finally{o.f()}return{newLinks:i,removed:s}},q=function(t,n){var e,i=[],s=Object(y["a"])(n);try{for(s.s();!(e=s.n()).done;){var o=e.value;O(o.id,t)&&i.push(o)}}catch(c){s.e(c)}finally{s.f()}return i},S=function(t,n){var e=n.findIndex((function(n){return n.id===t}));return e>-1},O=function(t,n){var e=n.findIndex((function(n){return n.tid===t||n.sid===t}));return e>-1},j=e("a5b7"),R=e.n(j),M=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"mqtt-container"}},[e("div",{staticClass:"flex-config"},[e("div",{staticClass:"flex-config-input"},[e("p",[t._v("Host")]),e("v-text-field",{attrs:{placeholder:"localhost"},model:{value:t.connection.host,callback:function(n){t.$set(t.connection,"host",n)},expression:"connection.host"}})],1),e("div",{staticClass:"flex-config-input"},[e("p",[t._v("Port")]),e("v-text-field",{attrs:{placeholder:"9001"},model:{value:t.connection.port,callback:function(n){t.$set(t.connection,"port",t._n(n))},expression:"connection.port"}})],1),e("div",{staticClass:"flex-config-input"},[e("p",[t._v("Mountpoint / Endpoint")]),e("v-text-field",{attrs:{placeholder:"/mqtt"},model:{value:t.connection.endpoint,callback:function(n){t.$set(t.connection,"endpoint",n)},expression:"connection.endpoint"}})],1),e("div",{staticClass:"flex-config-input"},[e("v-btn",{staticClass:"button-submit",on:{click:t.createConnection}},[t._v("Connect")]),e("v-btn",{staticClass:"button-submit",on:{click:t.destroyConnection}},[t._v("Disconnect")])],1),e("div",{staticClass:"flex-config-input"},[e("div",{staticClass:"display-status"},[e("p",[t._v("Currently client connected status is: "+t._s(t.client.connected))])])])]),e("div",{staticClass:"flex-config"},[e("div",{staticClass:"flex-config-input"},[e("p",[t._v("Host")]),e("v-text-field",{attrs:{placeholder:"topic/mqttx"},model:{value:t.subscription.topic,callback:function(n){t.$set(t.subscription,"topic",n)},expression:"subscription.topic"}})],1),e("div",{staticClass:"flex-config-input"},[e("p",[t._v("Port")]),e("v-text-field",{attrs:{placeholder:"0"},model:{value:t.subscription.qos,callback:function(n){t.$set(t.subscription,"qos",t._n(n))},expression:"subscription.qos"}})],1),e("div",{staticClass:"flex-config-input"},[e("v-btn",{staticClass:"button-submit",on:{click:t.doSubscribe}},[t._v("Subscribe")]),e("v-btn",{staticClass:"button-submit",on:{click:t.doUnSubscribe}},[t._v("Unsubscribe")])],1),e("div",{staticClass:"flex-config-input"},[e("div",{staticClass:"display-status"},[e("p",[t._v("Currently client subscribed status is: "+t._s(t.subscribeSuccess))])])])]),e("div",{staticClass:"flex-config"},[e("div",{staticClass:"flex-config-input"},[e("p",[t._v("Host")]),e("v-text-field",{attrs:{placeholder:"topic/mqttx"},model:{value:t.publish.topic,callback:function(n){t.$set(t.publish,"topic",n)},expression:"publish.topic"}})],1),e("div",{staticClass:"flex-config-input"},[e("p",[t._v("Port")]),e("v-text-field",{attrs:{placeholder:"0"},model:{value:t.subscription.qos,callback:function(n){t.$set(t.subscription,"qos",t._n(n))},expression:"subscription.qos"}})],1),e("div",{staticClass:"flex-config-input"},[e("p",[t._v("Host")]),e("v-text-field",{model:{value:t.publish.payload,callback:function(n){t.$set(t.publish,"payload",n)},expression:"publish.payload"}})],1),e("div",{staticClass:"flex-config-input"},[e("v-btn",{staticClass:"button-submit",on:{click:t.doPublish}},[t._v("Publish")])],1)]),e("div",{staticClass:"flex-config"},[e("div",{staticClass:"flex-config-input"},[e("v-text-field",{attrs:{id:"message-box"},model:{value:t.receiveNews,callback:function(n){t.receiveNews=n},expression:"receiveNews"}})],1)])])},P=[],L=e("15fd"),E=e("e7fc"),T=e.n(E),U=["host","port","endpoint"],V={name:"Mqtt",data:function(){return{connection:{host:"192.168.0.130",port:9001,endpoint:"/mqtt",clean:!0,connectTimeout:4e3,reconnectPeriod:4e3,clientId:"",username:"",password:""},subscription:{topic:"topic/mqttx",qos:0},publish:{topic:"topic/mqttx",qos:0,payload:'\n        {"op":5,"rqi":"rs3Zy8lrqs","to":"mqtt://127.0.0.1/S2m7DGh9dPe?ct=json",\n        "fr":"/Mobius2",\n        "pc":{\n            "m2m:sgn":{\n                "sur":"Mobius/rpi4/radar/mobiususer02.MOBIUS.BROWSER.WEB_sub",\n                "nev":{\n                    "rep":{\n                        "m2m:cin":{\n                            "rn":"4-20210910020904321","ty":4,\n                            "pi":"3-20210909042538192575",\n                            "ri":"4-20210910020904321095",\n                            "ct":"20210910T020904",\n                            "lt":"20210910T020904",\n                            "st":166,"et":"20230910T020904",\n                            "cs":11,\n                            "con":\n                                {"key":"128"},\n                                "cr":"Srpi4"\n                            }\n                        },\n                        "net":3\n                    },\n                    "rvi":"2a"\n                }\n            }\n        }'},receiveNews:"",qosList:[{label:0,value:0},{label:1,value:1},{label:2,value:2}],client:{connected:!1},subscribeSuccess:!1}},methods:{createConnection:function(){var t=this,n=this.connection,e=n.host,i=n.port,s=n.endpoint,o=Object(L["a"])(n,U),c="ws://".concat(e,":").concat(i).concat(s);try{console.log(o),this.client=T.a.connect(c)}catch(r){console.log("mqtt.connect error",r)}this.client.on("connect",(function(){console.log("Connection succeeded!")})),this.client.on("error",(function(t){console.log("Connection failed",t)})),this.client.on("message",(function(n,e){t.receiveNews=t.receiveNews.concat(e),console.log("Received message ".concat(e," from topic ").concat(n));var i=JSON.parse(e);t.$emit("new_mqtt_msg",i),console.log("Sent Message")}))},doSubscribe:function(){var t=this,n=this.subscription,e=n.topic,i=n.qos;this.client.subscribe(e,i,(function(n,e){n?console.log("Subscribe to topics error",n):(t.subscribeSuccess=!0,console.log("Subscribe to topics res",e))}))},doUnSubscribe:function(){var t=this.subscription.topic;this.client.unsubscribe(t,(function(t){t&&console.log("Unsubscribe error",t)}))},doPublish:function(){var t=this.publish,n=t.topic,e=t.qos,i=t.payload;this.client.publish(n,i,e,(function(t){t&&console.log("Publish error",t)}))},destroyConnection:function(){if(this.client.connected)try{this.client.end(),this.client={connected:!1},console.log("Successfully disconnected!")}catch(t){console.log("Disconnect failed",t.toString())}}}},B=V,H=(e("172c"),e("8336")),I=e("8654"),A=Object(a["a"])(B,M,P,!1,null,"255e2ae3",null),D=A.exports;u()(A,{VBtn:H["a"],VTextField:I["a"]});var W={components:{D3Network:R.a,Mqtt:D},data:function(){return{nodes:[{id:0,name:"Mobius Server",_cssClass:"node pinned",pinned:!0,fx:window.innerWidth/2,fy:window.innerHeight/2}],links:[],rawAe:[],aeNodeRef:{},rawCnt:[],cntNodeRef:{},cinNodeRef:{},options:{force:3e3,nodeSize:20,nodeLabels:!0,linkWidth:5}}},created:function(){var t=this;this.$http.get("/api/mob_ae").then((function(n){n.data.forEach((function(n){console.log(n.ri),t.rawAe.push(n.ri);var e=t.addNode(0,n.ri);t.aeNodeRef[e[0].name]=e}))})),this.$http.get("/api/mob_cnt").then((function(n){n.data.forEach((function(n){console.log(n.ri),t.rawCnt.push(n.ri);var e=t.addCnt(n.ri);t.cntNodeRef[e[0].name]=e}))}))},methods:{addLink:function(t,n){var e=this;return e.links.push({sid:t,tid:n}),e.links.at(-1)},addNode:function(t,n){var e=this,i=this.nodes.at(-1)["id"];i+=1,e.nodes.push({id:i,name:n});var s=e.nodes.at(-1),o=e.addLink(t,i);return[s,o]},rebuildLinks:function(t){console.log(t),t||(t=this.nodes),console.log(t);var n=$(t,this.links);return console.log(n),n.newLinks},removeNode:function(t){var n=this,e=t[0].id;console.log(e),console.log(this.nodes),console.log(this.links),N(e,this.nodes,(function(t){t&&(n.links=n.rebuildLinks(t),n.nodes=q(n.links,t))}))},addCnt:function(t){var n=t.split("/");n.pop(),n=n.join("/");var e=this.aeNodeRef[n],i=e[0],s=this.addNode(i.id,t);return s},addCin:function(t){console.log("enter add cin");var n=this,e="/"+t.pc["m2m:sgn"].sur,i=t.pc["m2m:sgn"].nev.rep["m2m:cin"].con.key,s=e.split("/");s=s.slice(0,4),s=s.join("/");var o=this.cntNodeRef[s],c=o[0],r=this.addNode(c.id,i);if(s in n.cinNodeRef||(n.cinNodeRef[s]=[],n.cinNodeRef[s].push(r)),s in n.cinNodeRef)if(n.cinNodeRef[s].length>3){var a=n.cinNodeRef[s].pop(0);n.removeNode(a),n.cinNodeRef[s].push(r)}else n.cinNodeRef[s].push(r)}}},F=W,J=(e("6420"),Object(a["a"])(F,C,k,!1,null,null,null)),G=J.exports,z=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"input_row"},[e("label",{attrs:{for:"id"}},[t._v("아이디")]),e("v-text-field",{attrs:{type:"text",id:"id"},model:{value:t.user.userid,callback:function(n){t.$set(t.user,"userid",n)},expression:"user.userid"}})],1),e("div",{staticClass:"input_row"},[e("label",{attrs:{for:"password"}},[t._v("비밀번호")]),e("v-text-field",{attrs:{type:"password",id:"password"},model:{value:t.user.password,callback:function(n){t.$set(t.user,"password",n)},expression:"user.password"}})],1),e("v-btn",{attrs:{elevation:"2"},on:{click:t.login}},[t._v("로그인")])],1)},Z=[],K={data:function(){return{user:{userid:"",password:""}}},methods:{login:function(){var t=this;this.$http.post("/api/users/login",{user:this.user}).then((function(n){alert(n.data.message),t.$router.push({name:"MainMenu"})}),(function(t){alert("Login failed! please check your id or password"+t)})).catch((function(t){alert(t)}))}}},Q=K,X=Object(a["a"])(Q,z,Z,!1,null,null,null),Y=X.exports;u()(X,{VBtn:H["a"],VTextField:I["a"]});var tt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"input_row"},[e("label",{attrs:{for:"id"}},[t._v(" 아이디 ")]),e("v-text-field",{attrs:{id:"id"},model:{value:t.user.userid,callback:function(n){t.$set(t.user,"userid",n)},expression:"user.userid"}})],1),e("div",{staticClass:"input_row"},[e("label",{attrs:{for:"name"}},[t._v(" 이름 ")]),e("v-text-field",{attrs:{id:"name"},model:{value:t.user.name,callback:function(n){t.$set(t.user,"name",n)},expression:"user.name"}})],1),e("div",{staticClass:"input_row"},[e("label",{attrs:{for:"password"}},[t._v(" 비밀번호 ")]),e("v-text-field",{attrs:{id:"password"},model:{value:t.user.password,callback:function(n){t.$set(t.user,"password",n)},expression:"user.password"}})],1),e("v-btn",{attrs:{elevation:"2"},on:{click:t.signUp}},[t._v("가입하기")]),e("router-link",{attrs:{to:{name:"Login"}}})],1)},nt=[],et={data:function(){return{user:{userid:"",name:"",password:""}}},methods:{signUp:function(){var t=this;this.$http.post("/api/users/signUp",{user:this.user}).then((function(n){1==n.data.success&&(alert(n.data.message),t.$router.push({name:"Login"})),0==n.data.success&&alert(n.data.message)})).catch((function(t){alert(t)}))}}},it=et,st=(e("56c9"),Object(a["a"])(it,tt,nt,!1,null,null,null)),ot=st.exports;u()(st,{VBtn:H["a"],VTextField:I["a"]}),i["default"].use(b["a"]);var ct=new b["a"]({mode:"history",routes:[{path:"/login",name:"Login",component:Y},{path:"/signup",name:"SignUp",component:ot},{path:"/",name:"VueGraph",component:G},{path:"/userlist",name:"UserList",component:w}]}),rt=e("bc3a"),at=e.n(rt),lt=e("ce5b"),ut=e.n(lt);e("bf40");i["default"].use(ut.a);var dt={},pt=new ut.a(dt);i["default"].config.productionTip=!1,i["default"].prototype.$http=at.a,i["default"].config.devtools=!0;var ft=new i["default"];new i["default"]({render:function(t){return t(v)},vuetify:pt,router:ct}).$mount("#app")},6:function(t,n){}});
//# sourceMappingURL=app.3db18d0a.js.map